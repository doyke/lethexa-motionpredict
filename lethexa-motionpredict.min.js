!function(a){"use strict";a.withMathFunc=function(a){return{getPositionByVeloAndTime:function(b,c,d){return a.add(b,a.mulScalar(c,d))},quadEquation:function(a,b){var c=Math.sqrt(a*a/4-b),d=-a/2,e=[];return c>0?e=[d+c,d-c]:0===c&&(e=[d]),e},calcCPATime:function(b,c,d,e){var f=a.sub(d,b),g=a.sub(e,c),h=-a.dot(f,g),i=a.lengthSquared(g);return 0===i?void 0:h/i},calcCPAPositionTarget1:function(a,b,c,d){var e=this.calcCPATime(a,b,c,d);if(void 0!==e)return this.getPositionByVeloAndTime(a,b,e)},calcCPAPositionTarget2:function(a,b,c,d){var e=this.calcCPATime(a,b,c,d);if(void 0!==e)return this.getPositionByVeloAndTime(c,d,e)},calcInterceptTime:function(b,c,d,e){var f=a.sub(d,b),g=a.lengthSquared(e)-c*c,h=2*a.dot(e,f),i=a.lengthSquared(f);if(0===g){if(0!==h){var j=-i/h;if(j>0)return j}}else{var k=h/g,l=i/g,m=this.quadEquation(k,l);if(0===m.length)return[];if(2===m.length){var n=Math.min(m[0],m[1]);return 0>n&&(n=Math.max(m[0],m[1])),n}if(1===m.length&&m[0]>=0)return m[0]}},calcInterceptPosition:function(a,b,c,d){var e=this.calcInterceptTime(a,b,c,d);if(void 0!==e)return this.getPositionByVeloAndTime(c,d,e)},calcArrivalTime:function(b,c,d,e){var f=Math.sqrt(a.lengthSquared(a.sub(d,b))),g=this.calcApproachSpeed(b,c,d,e);return g>0?f/g:void 0},calcApproachSpeed:function(b,c,d,e){var f=a.sub(d,b),g=a.sub(e,c),h=a.dot(f,g),i=Math.sqrt(a.lengthSquared(f));return 0>=i?0:-h/i}}}}("undefined"==typeof exports?this.motionpredict={}:exports);